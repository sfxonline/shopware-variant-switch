"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["sas-variant-switch"],{4963:(t,e,i)=>{var s,n,r,a=i(6285),o=i(8254),c=i(4690),l=i(3206),d=i(1966),h=i(5944);class u extends a.Z{init(){this._httpClient=new o.Z,this._radioFields=l.Z.querySelectorAll(this.el,this.options.radioFieldSelector,!1),this._selectFields=l.Z.querySelectorAll(this.el,this.options.selectFieldSelector,!1),this._productBox=this.el.closest(".product-box"),window.variantResponseCached=window.variantResponseCached||{},this._hoveringValue=null,this._preserveCurrentValues(),this._registerEvents()}_preserveCurrentValues(){this._radioFields&&d.Z.iterate(this._radioFields,(t=>{u._isFieldSerializable(t)&&t.dataset&&(t.dataset.variantSwitchValue=t.value)}))}_registerEvents(){this._radioFields&&d.Z.iterate(this._radioFields,(t=>{t.addEventListener("change",(t=>this._onChange(t.target)));const e=t.parentElement.querySelector("label");window.sasPreviewVariantOnHover&&(e.addEventListener("mouseenter",(t=>{const e=t.target.parentElement.querySelector("input");this._hoveringValue=e.value,e&&!e.checked&&setTimeout((()=>{this._hoveringValue&&this._hoveringValue===e.value&&e.click()}),200)})),e.addEventListener("mouseleave",(t=>{this._hoveringValue=null})))})),this._selectFields&&d.Z.iterate(this._selectFields,(t=>{t.addEventListener("change",(t=>this._onChange(t.target)))}))}_onChange(t){const e=this._getSwitchedOptionId(t),i=this._getFormValue();this._preserveCurrentValues(),this.$emitter.publish("onChange");const s={switched:e,options:JSON.stringify(i),cardType:this.options.cardType};c.Z.create(this.el);let n=l.Z.getAttribute(t,this.options.urlAttribute);if(n=n+"?"+h.stringify({...s}),window.variantResponseCached[n])return this._productBox&&(this._productBox.outerHTML=window.variantResponseCached[n]),c.Z.remove(this.el),void window.PluginManager.initializePlugins();this._httpClient.get(n,(t=>{window.variantResponseCached[n]=t,this._productBox&&(this._productBox.outerHTML=t),c.Z.remove(this.el),window.PluginManager.initializePlugins()}))}_getSwitchedOptionId(t){return!!u._isFieldSerializable(t)&&l.Z.getAttribute(t,"data-name")}_getFormValue(){const t={};return this._radioFields&&d.Z.iterate(this._radioFields,(e=>{u._isFieldSerializable(e)&&e.checked&&(t[l.Z.getAttribute(e,"data-name")]=e.value)})),this._selectFields&&d.Z.iterate(this._selectFields,(e=>{if(u._isFieldSerializable(e)){const i=[...e.options].find((t=>t.selected));t[l.Z.getAttribute(e,"data-name")]=i.value}})),t}static _isFieldSerializable(t){return!t.name||t.disabled||-1===["file","reset","submit","button"].indexOf(t.type)}_disableFields(){d.Z.iterate(this._radioFields,(t=>{t.classList&&t.classList.add("disabled","disabled")}))}}s=u,r={radioFieldSelector:".sas-product-configurator-option-input",selectFieldSelector:".sas-product-configurator-select-input",urlAttribute:"data-url",cardType:"standard"},(n=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n="options"))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r;var f=i(8053);class g extends f.Z{_registerEvents(){super._registerEvents(),this.switchOptions={switchOptionTriggerSelector:".js-offcanvas-cart-switch-option"},this._registerSwitchOptionEvents()}_registerSwitchOptionEvents(){const t=l.Z.querySelectorAll(document,this.switchOptions.switchOptionTriggerSelector,!1);t&&d.Z.iterate(t,(t=>t.addEventListener("change",this._onSwitchLineItemOption.bind(this))))}_onSwitchLineItemOption(t){const e=t.target.closest("form");e.querySelector(".form-switched").value=t.target.id;const i=this.options.cartItemSelector;this.$emitter.publish("onSwitchLineItemOption"),this._fireRequest(e,i)}}const v=window.PluginManager;window.sasShowOnProductCard&&v.register("VariantHoverSwitch",u,"[data-variant-hover-switch]"),window.sasShowOnOffCanvasCart&&v.override("OffCanvasCart",g,"[data-offcanvas-cart]")},8053:(t,e,i)=>{i.d(e,{Z:()=>p});var s,n,r,a=i(6285),o=i(3206),c=i(8254),l=i(2615),d=i(9658),h=i(207),u=i(1966),f=i(3637),g=i(4690),v=i(46);class p extends a.Z{init(){this.client=new c.Z,this._registerOpenTriggerEvents()}openOffCanvas(t,e,i){l.Z.open(t,e,this._onOffCanvasOpened.bind(this,i),this.options.offcanvasPosition,!0),l.Z.setAdditionalClassName(this.options.additionalOffcanvasClass)}_registerOpenTriggerEvents(){const t=d.Z.isTouchDevice()?"touchstart":"click";this.el.addEventListener(t,this._onOpenOffCanvasCart.bind(this))}_onOpenOffCanvasCart(t){t.preventDefault(),this.openOffCanvas(window.router["frontend.cart.offcanvas"],!1)}_registerRemoveProductTriggerEvents(){const t=o.Z.querySelectorAll(document,this.options.removeProductTriggerSelector,!1);t&&u.Z.iterate(t,(t=>t.addEventListener("submit",this._onRemoveProductFromCart.bind(this))))}_registerChangeQuantityProductTriggerEvents(){const t=o.Z.querySelectorAll(document,this.options.changeProductQuantityTriggerSelector,!1),e=o.Z.querySelectorAll(document,this.options.changeProductQuantityTriggerNumberSelector,!1);t&&u.Z.iterate(t,(t=>t.addEventListener("change",this._onChangeProductQuantity.bind(this)))),e&&u.Z.iterate(e,(t=>{t.addEventListener("change",v.Z.debounce(this._onChangeProductQuantity.bind(this),this.options.changeQuantityInputDelay))}))}_registeraddPromotionTriggerEvents(){const t=o.Z.querySelectorAll(document,this.options.addPromotionTriggerSelector,!1);t&&u.Z.iterate(t,(t=>t.addEventListener("submit",this._onAddPromotionToCart.bind(this))))}_registerUpdateShippingEvents(){const{shippingContainerSelector:t}=this.options,e=document.querySelector(`${t} select`);e&&e.addEventListener("input",this._onChangeShippingMethod.bind(this))}_registerToggleShippingSelection(){const{shippingToggleSelector:t,shippingContainerSelector:e}=this.options,i=document.querySelector(t);i&&i.addEventListener("click",(()=>{const t=document.querySelector(e),i="offcanvas-shipping-preference--hidden";t.classList.contains(i)?t.classList.remove(i):t.classList.add(i)}))}_registerEvents(){this._registerRemoveProductTriggerEvents(),this._registerChangeQuantityProductTriggerEvents(),this._registeraddPromotionTriggerEvents(),this._isShippingAvailable()&&(this._registerUpdateShippingEvents(),this._registerToggleShippingSelection()),this.$emitter.publish("registerEvents")}_onOffCanvasOpened(t,e){"function"==typeof t&&t(e),this.$emitter.publish("offCanvasOpened",{response:e}),this._fetchCartWidgets(),this._registerEvents()}_fireRequest(t,e,i){g.Z.create(t.closest(e));const s=i?i.bind(this):this._onOffCanvasOpened.bind(this,this._updateOffCanvasContent.bind(this)),n=o.Z.getAttribute(t,"action"),r=h.Z.serialize(t);this.$emitter.publish("beforeFireRequest"),this.client.post(n,r,s)}_onRemoveProductFromCart(t){t.preventDefault();const e=t.target,i=this.options.cartItemSelector;this.$emitter.publish("onRemoveProductFromCart"),this._fireRequest(e,i)}_onChangeProductQuantity(t){const e=t.target.closest("form"),i=this.options.cartItemSelector;this.$emitter.publish("onChangeProductQuantity"),this._fireRequest(e,i)}_onAddPromotionToCart(t){t.preventDefault();const e=t.target,i=this.options.cartPromotionSelector;this.$emitter.publish("onAddPromotionToCart"),this._fireRequest(e,i)}_fetchCartWidgets(){const t=window.PluginManager.getPluginInstances("CartWidget");u.Z.iterate(t,(t=>t.fetch())),this.$emitter.publish("fetchCartWidgets")}_updateOffCanvasContent(t){f.Z.setContent(t,!0,this._registerEvents.bind(this)),window.PluginManager.initializePlugins()}_isShippingAvailable(){const{shippingContainerSelector:t}=this.options;return!!document.querySelector(t)}_onChangeShippingMethod(t){t.preventDefault(),this.$emitter.publish("onShippingMethodChange");const e=window.router["frontend.cart.offcanvas"];this._fireRequest(t.target.form,".offcanvas-summary",(()=>{this.client.get(e,(t=>{this._updateOffCanvasContent(t),this._registerEvents()}),"text/html")}))}}s=p,r={removeProductTriggerSelector:".js-offcanvas-cart-remove-product",changeProductQuantityTriggerSelector:".js-offcanvas-cart-change-quantity",changeProductQuantityTriggerNumberSelector:".js-offcanvas-cart-change-quantity-number",changeQuantityInputDelay:800,addPromotionTriggerSelector:".js-offcanvas-cart-add-promotion",cartItemSelector:".js-cart-item",cartPromotionSelector:".js-offcanvas-cart-promotion",offcanvasPosition:"right",shippingContainerSelector:".offcanvas-shipping-preference",shippingToggleSelector:".js-toggle-shipping-selection",additionalOffcanvasClass:"cart-offcanvas"},(n=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n="options"))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r},2615:(t,e,i)=>{i.d(e,{Z:()=>o});var s=i(3637),n=i(8254),r=i(7906);let a=null;class o extends s.Z{static open(t=!1,e=!1,i=null,n="left",r=!0,a=s.Z.REMOVE_OFF_CANVAS_DELAY(),o=!1,c=""){if(!t)throw new Error("A url must be given!");s.r._removeExistingOffCanvas();const l=s.r._createOffCanvas(n,o,c,r);this.setContent(t,e,i,r,a),s.r._openOffcanvas(l)}static setContent(t,e,i,s,c){const l=new n.Z;super.setContent(`<div class="offcanvas-body">${r.Z.getTemplate()}</div>`,s,c),a&&a.abort();const d=t=>{super.setContent(t,s,c),"function"==typeof i&&i(t)};a=e?l.post(t,e,o.executeCallback.bind(this,d)):l.get(t,o.executeCallback.bind(this,d))}static executeCallback(t,e){"function"==typeof t&&t(e),window.PluginManager.initializePlugins()}}},3637:(t,e,i)=>{i.d(e,{Z:()=>d,r:()=>l});var s=i(9658),n=i(2005),r=i(1966);const a="offcanvas",o=350;class c{constructor(){this.$emitter=new n.Z}open(t,e,i,s,n,r,a){this._removeExistingOffCanvas();const o=this._createOffCanvas(i,r,a,s);this.setContent(t,s,n),this._openOffcanvas(o,e)}setContent(t,e,i){const s=this.getOffCanvas();s[0]&&(s[0].innerHTML=t,this._registerEvents(i))}setAdditionalClassName(t){this.getOffCanvas()[0].classList.add(t)}getOffCanvas(){return document.querySelectorAll(`.${a}`)}close(t){const e=this.getOffCanvas();r.Z.iterate(e,(t=>{bootstrap.Offcanvas.getInstance(t).hide()})),setTimeout((()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:e})}),t)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(t,e){c.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof e&&e()}_registerEvents(t){const e=s.Z.isTouchDevice()?"touchend":"click",i=this.getOffCanvas();r.Z.iterate(i,(e=>{const s=()=>{setTimeout((()=>{e.remove(),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:i})}),t),e.removeEventListener("hide.bs.offcanvas",s)};e.addEventListener("hide.bs.offcanvas",s)})),window.addEventListener("popstate",this.close.bind(this,t),{once:!0});const n=document.querySelectorAll(".js-offcanvas-close");r.Z.iterate(n,(i=>i.addEventListener(e,this.close.bind(this,t))))}_removeExistingOffCanvas(){c.bsOffcanvas=null;const t=this.getOffCanvas();return r.Z.iterate(t,(t=>t.remove()))}_getPositionClass(t){return"left"===t?"offcanvas-start":"right"===t?"offcanvas-end":`offcanvas-${t}`}_createOffCanvas(t,e,i,s){const n=document.createElement("div");if(n.classList.add(a),n.classList.add(this._getPositionClass(t)),!0===e&&n.classList.add("is-fullwidth"),i){const t=typeof i;if("string"===t)n.classList.add(i);else{if(!Array.isArray(i))throw new Error(`The type "${t}" is not supported. Please pass an array or a string.`);i.forEach((t=>{n.classList.add(t)}))}}return document.body.appendChild(n),c.bsOffcanvas=new bootstrap.Offcanvas(n,{backdrop:!1!==s||"static"}),n}}const l=Object.freeze(new c);class d{static open(t,e=null,i="left",s=!0,n=350,r=!1,a=""){l.open(t,e,i,s,n,r,a)}static setContent(t,e=!0,i=350){l.setContent(t,e,i)}static setAdditionalClassName(t){l.setAdditionalClassName(t)}static close(t=350){l.close(t)}static exists(){return l.exists()}static getOffCanvas(){return l.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return o}}}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return e=4963,t(t.s=e);var e}));t.O()}]);